<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>固定pic文件夹图片墙（无需用户操作）</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      user-select: none;
      -webkit-user-select: none;
    }

    body {
      font-family: sans-serif;
      background: #000;
      overflow: hidden;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    /* 图片墙容器 */
    .perspective-wrapper {
      width: 800px;
      height: 800px;
      perspective: 2000px;
      perspective-origin: center center;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .cylinder-container {
      position: relative;
      width: 100%;
      height: 100%;
      transform-style: preserve-3d;
      transition: transform 0.05s ease-out;
      cursor: grab;
      transform-origin: center center;
      pointer-events: auto;
      
    }

    .cylinder-container:active {
      cursor: grabbing;
    }

    .cylinder-layer {
      position: absolute;
      left: 50%;
      top: 50%;
      width: 480px;
      height: 80px;
      transform-style: preserve-3d;
    }

    .cylinder-img {
      position: absolute;
      top: 50%;
      left: 240px;
      transform-origin: 0 50%;
      object-fit: cover;
      backface-visibility: visible;
      opacity: 1;
      transform: translateY(-50%);
      pointer-events: auto;
      user-select: none;
      -webkit-user-select: none;
      user-drag: none;
      -webkit-user-drag: none;
      -webkit-touch-callout: none;
      cursor: pointer;
    }

    /* 大图弹窗样式 */
    .img-popup {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.9);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      pointer-events: auto;
    }

    .popup-content {
      position: relative;
      max-width: 90%;
      max-height: 90%;
    }

    .big-img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      border: 2px solid #fff;
    }

    .close-btn {
      position: absolute;
      top: -40px;
      right: 0;
      width: 40px;
      height: 40px;
      background: #fff;
      color: #000;
      font-size: 24px;
      font-weight: bold;
      text-align: center;
      line-height: 40px;
      border-radius: 50%;
      cursor: pointer;
      transition: background 0.2s;
    }

    .close-btn:hover {
      background: #ff4444;
      color: #fff;
    }

    /* 状态提示 */
    .status {
      position: fixed;
      top: 20px;
      left: 20px;
      color: #fff;
      font-size: 12px;
    }

    .status span {
      background: #009688;
      padding: 2px 6px;
      border-radius: 3px;
      margin-left: 8px;
    }

    .count {
      position: fixed;
      top: 20px;
      right: 20px;
      color: #fff;
      font-size: 12px;
    }

    .tip {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      color: #ccc;
      font-size: 12px;
    }

    /* 加载提示 */
    .loading {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: #fff;
      font-size: 18px;
      z-index: 999;
    }
  </style>
</head>

<body>
  <!-- 加载提示 -->
  <div class="loading" id="loading">正在加载图片...</div>

  <!-- 状态提示 -->
  <div class="status">状态：<span id="rotateStatus">自动旋转</span></div>
  <div class="count" id="imgCount">0张图片</div>

  <!-- 图片墙容器 -->
  <div class="perspective-wrapper">
    <div class="cylinder-container" id="cylinder">
      <div class="cylinder-layer" id="layer1"></div>
      <div class="cylinder-layer" id="layer2"></div>
      <div class="cylinder-layer" id="layer3"></div>
      <div class="cylinder-layer" id="layer4"></div>
      <div class="cylinder-layer" id="layer5"></div>
    </div>
  </div>

  <!-- 大图弹窗 -->
  <div class="img-popup" id="imgPopup">
    <div class="popup-content">
      <div class="close-btn" id="closeBtn">&times;</div>
      <img src="" alt="大图" class="big-img" id="bigImg">
    </div>
  </div>

  <div class="tip">点击图片查看大图 · 自由拖拽旋转 · 无选中干扰</div>

  <script>
    const config = {
      layers: 5,
      imgsPerLayer: 40,
      autoRotateSpeed: 0.1,
      minScale: 0.6,
      maxScale: 2.0,
      baseRingRadius: 210,
      dragSensitivity: 0.3,
      fixedImgGap: 2,
      baseImgHeight: 78,
      baseLayerOffsets: {
        layer1: -200,
        layer2: -100,
        layer3: 0,
        layer4: 100,
        layer5: 200
      }
    };

    // ====================== 关键：替换成你pic文件夹里的图片名 ======================
    // 格式：'pic/你的图片名.后缀'，不管命名多乱，复制原文件名即可
    const imagePaths = [
      'pic/10e5m6bwgd41qxgwd3aygkk73_0.jpg',
      'pic/46b286d15f4a41ca9a84784debf69761.jpg',
      'pic/640 (1).jpg',
      'pic/640 (2).jpg',
      'pic/640.jpg',
      'pic/8981CCAB10D31EC602E24E604AA02637.jpg',
      'pic/01000797.JPG',
      'pic/01000811.JPG',
      'pic/d504c55c37b74e3d9850aaf2e1420cec.jpg',
      'pic/DINGTALK_IM_3329579061.JPG.JPG',
      'pic/F38L6V09VDUOYUKZ6PNK.png',
      'pic/IMG_20230915_130053.jpg',
      'pic/IMG_20231011_095948.jpg',
      'pic/IMG_20231011_141049.jpg',
      'pic/IMG_20231011_141106.jpg',
      'pic/IMG_20231012_080006.jpg',
      'pic/IMG_20231012_080011.jpg',
      'pic/IMG_20231012_093023.jpg',
      'pic/IMG_20231012_093320.jpg',
      'pic/IMG_20231012_103531.jpg',
      'pic/IMG_20231012_103536.jpg',
      'pic/IMG_20231012_103537.jpg',
      'pic/IMG_20231012_103541.jpg',
      'pic/IMG_20231012_103546.jpg',
      'pic/IMG_20231012_103547.jpg',
      'pic/IMG_20231012_103549.jpg',
      'pic/IMG_20231012_103553.jpg',
      'pic/IMG_20231012_103554.jpg',
      'pic/IMG_20231012_103608.jpg',
      'pic/IMG_20231012_103609.jpg',
      'pic/IMG_20231012_103620.jpg',
      'pic/IMG_20231012_103622.jpg',
      'pic/IMG_20231012_103625.jpg',
      'pic/IMG_20231012_103635.jpg',
      'pic/IMG_20231012_103641.jpg',
      'pic/IMG_20231012_103721.jpg',
      'pic/IMG_20231012_103732.jpg',
      'pic/IMG_20231012_103734.jpg',
      'pic/IMG_20231012_103736.jpg',
      'pic/IMG_20231012_103738.jpg',
      'pic/IMG_20231012_103740.jpg',
      'pic/IMG_20231012_103757.jpg',
      'pic/IMG_20231012_133930.jpg',
      'pic/IMG_20231012_133940.jpg',
      'pic/IMG_20231012_134251.jpg',
      'pic/IMG_20231012_134306.jpg',
      'pic/IMG_20231012_141443.jpg',
      'pic/IMG_20231012_143131.jpg',
      'pic/IMG_20231012_143909.jpg',
      'pic/IMG_20231012_144446.jpg',
      'pic/IMG_20231012_154656.jpg',
      'pic/IMG_20231012_154749.jpg',
      'pic/IMG_20231012_155330.jpg',
      'pic/IMG_20231012_155426.jpg',
      'pic/IMG_20231013_083009.jpg',
      'pic/IMG_20231013_083034.jpg',
      'pic/IMG_20231013_084022.jpg',
      'pic/IMG_20231013_084037.jpg',
      'pic/IMG_20231013_085208.jpg',
      'pic/IMG_20231013_100757.jpg',
      'pic/IMG_20231013_101028.jpg',
      'pic/IMG_20231013_151325.jpg',
      'pic/IMG_20231013_151700.jpg',
      'pic/IMG_20231027_150034.jpg',
      'pic/IMG_20231027_150054.jpg',
      'pic/IMG_20231027_150152.jpg',
      'pic/IMG_20231103_124842.jpg',
      'pic/IMG_20231103_125038.jpg',
      'pic/IMG_20231103_125139.jpg',
      'pic/IMG_20231103_125240.jpg',
      'pic/IMG_20231103_125536.jpg',
      'pic/IMG_20231123_063511.jpg',
      'pic/IMG_20231208_124732.jpg',
      'pic/IMG_20231208_124945.jpg',
      'pic/IMG_20231208_124948.jpg',
      'pic/IMG_20231211_121144.jpg',
      'pic/IMG_20231214_115226.jpg',
      'pic/IMG_20231225_085827.jpg',
      'pic/IMG_20231229_100537.jpg',
      'pic/IMG_20231229_100545.jpg',
      'pic/IMG_20231229_100556.jpg',
      'pic/IMG_20231229_100604.jpg',
      'pic/IMG_20231229_100616.jpg',
      'pic/IMG_20231229_100622.jpg',
      'pic/IMG_20231229_102137.jpg',
      'pic/IMG_20231229_102244.jpg',
      'pic/IMG_20231229_102326.jpg',
      'pic/IMG_20231229_110601.jpg',
      'pic/IMG_20241009_150908.jpg',
      'pic/IMG_20241017_083829.jpg',
      'pic/IMG_20241017_151302.jpg',
      'pic/IMG_20241017_152854.jpg',
      'pic/IMG_20241018_091236.jpg',
      'pic/IMG_20241018_092353.jpg',
      'pic/IMG_20241018_093242.jpg',
      'pic/IMG_20241018_101821.jpg',
      'pic/IMG_20241018_153809.jpg',
      'pic/IMG_20241018_155240.jpg',
      'pic/IMG_20241106_150841.jpg',
      'pic/IMG_20241125_072555.jpg',
      'pic/IMG_20241126_074758.jpg',
      'pic/IMG_20241216_164713.jpg',
      'pic/IMG_20241223_070846.jpg',
      'pic/IMG_20241231_153633.jpg',
      'pic/IMG_20250113_154158.jpg',
      'pic/IMG_20250117_121951.jpg',
      'pic/IMG_20250211_152655.jpg',
      'pic/IMG_20250217_122323_edit_3873002220352769.jpg',
      'pic/IMG_20250321_155309.jpg',
      'pic/IMG_20250331_072100.jpg',
      'pic/IMG_20250331_075314.jpg',
      'pic/IMG_20250331_075321.jpg',
      'pic/IMG_20250331_094240.jpg',
      'pic/IMG_20250331_115035.jpg',
      'pic/IMG_20250331_115603.jpg',
      'pic/IMG_20250331_134045.jpg',
      'pic/IMG_20250416_121221.jpg',
      'pic/IMG_20250425_114302.jpg',
      'pic/IMG_20250426_154656.jpg',
      'pic/IMG_20250502_090531.jpg',
      'pic/IMG_20250502_090724.jpg',
      'pic/IMG_20250508_114321.jpg',
      'pic/IMG_20250513_073837.jpg',
      'pic/IMG_20250523_155630.jpg',
      'pic/IMG_20250530_145430.jpg',
      'pic/IMG_20250530_151950.jpg',
      'pic/IMG_20250530_160007.jpg',
      'pic/IMG_20250611_152509.jpg',
      'pic/iwELAqNqcGcDBgTRDMAF0QmQBrBqtFUVHTk28Afg5s4CxOoAB9IIohkPCAAJo2VkdQoAC9IAMMLl.jpg',
      'pic/iwELAqNqcGcDBgTRDMAF0QmQBrDktKyYmVlgoQfg5oPhvc8AB9IIohkPCAAJo2VkdQoAC9IAOzdO.jpg',
      'pic/lQDPJxwF8TrEHfvNBQDNA8Cwh8zWF-bhvFYH0F5THCwrAQ_960_1280.jpg',
      'pic/lQDPJyENyW0FnB_NEADNDACwbDp4s5OQXf4G-OoRGv1UAA_3072_4096.jpg',
      'pic/lQDPKHS7fB1ZLvvNBQDNA8CwQajxVRuN87IH0F5THCwrAA_960_1280.jpg',
      'pic/lQDPKIKVmrS9WR_NEADNDACwQkIXEq-xRl8G-OoNmif5AA_3072_4096.jpg',
      'pic/mmexport1697006867078.jpg',
      'pic/mmexport1697006870035.jpg',
      'pic/mmexport1697006872472.jpg',
      'pic/mmexport1697171716644.jpg',
      'pic/mmexport1697171719096.jpg',
      'pic/mmexport1697171721383.jpg',
      'pic/mmexport1697171723744.jpg',
      'pic/mmexport1697171726163.jpg',
      'pic/mmexport1731219304189.jpg',
      'pic/mmexport1731292694586.jpg',
      'pic/mmexport1731292698290.jpg',
      'pic/mmexport1731671987116.jpg',
      'pic/mmexport1745117573012.jpg',
      'pic/QQ20250806-164327.png',
      'pic/QQ20250806-172450.png',
      'pic/QQ20250806-173431.png',
      'pic/QQ20250806-173446.png',
      'pic/wx_camera_1748592645564.jpg',
      'pic/微信图片_2025-08-07_200621_706.jpg',
      'pic/微信图片_2025-08-07_200745_581.jpg',
      'pic/微信图片_2025-08-07_201708_906.jpg',
      'pic/微信图片_2025-08-08_204527_723.jpg',
      'pic/微信图片_2025-08-08_211527_414.jpg',
      'pic/微信图片_2025-08-08_211924_836.jpg',
      'pic/微信图片_2025-08-10_202132_741.jpg',
      'pic/2t4y7dsjpee9aub116z268dqm_0.jpg',
      'pic/8d663a0b4b3a41a6a3a4cc3c8f485180.jpg',
      // 继续添加：把pic里所有图片的路径都列在这里，数量不限
    ];
    // ===========================================================================

    // 全局状态
    let currentRotateX = 15;
    let currentRotateY = 0;
    let isDragging = false;
    let startX = 0;
    let startY = 0;
    let startRotateX = 0;
    let startRotateY = 0;
    let currentScale = 1;
    let isRotating = true;
    let isClickDrag = false;

    // DOM元素
    const cylinder = document.getElementById('cylinder');
    const layers = {
      layer1: document.getElementById('layer1'),
      layer2: document.getElementById('layer2'),
      layer3: document.getElementById('layer3'),
      layer4: document.getElementById('layer4'),
      layer5: document.getElementById('layer5')
    };
    const imgPopup = document.getElementById('imgPopup');
    const bigImg = document.getElementById('bigImg');
    const closeBtn = document.getElementById('closeBtn');
    const loading = document.getElementById('loading');
    const imgCount = document.getElementById('imgCount');
    const rotateStatus = document.getElementById('rotateStatus');

    /**
     * 初始化图片：直接加载固定的pic文件夹图片
     */
    function initImages() {
      if (imagePaths.length === 0) {
        loading.textContent = '请先在imagePaths数组里添加图片路径！';
        return;
      }

      // 清空原有图片
      Object.values(layers).forEach(layer => layer.innerHTML = '');

      const ringRadius = config.baseRingRadius * currentScale;
      const imgWidth = calcImgWidth(ringRadius);
      const imgHeight = config.baseImgHeight * currentScale;

      updateLayerOffsets();
      const totalImgsNeed = config.layers * config.imgsPerLayer; // 需要200张

      // 加载图片到图片墙（不足则循环）
      Object.keys(layers).forEach((layerKey, layerIdx) => {
        const layer = layers[layerKey];
        const angleStep = 360 / config.imgsPerLayer;

        for (let i = 0; i < config.imgsPerLayer; i++) {
          const img = document.createElement('img');
          img.className = 'cylinder-img';

          // 随机选一张固定图片（不足200张则循环）
          const randomIdx = Math.floor(Math.random() * imagePaths.length);
          const imgUrl = imagePaths[randomIdx];
          img.src = imgUrl;
          img.alt = `pic/${randomIdx + 1}`;
          img.dataset.bigSrc = imgUrl; // 大图用原图

          // 设置图片样式
          const rotateY = i * angleStep;
          img.style.width = `${imgWidth}px`;
          img.style.height = `${imgHeight}px`;
          img.style.transform = `
                        translateY(-50%) 
                        rotateY(${rotateY}deg) 
                        translateZ(${ringRadius}px)
                    `;
          img.dataset.angle = rotateY;

          // 绑定点击事件（区分拖拽/点击）
          img.addEventListener('click', (e) => {
            if (isClickDrag) {
              isClickDrag = false;
              return;
            }
            e.stopPropagation();
            openBigImg(img.dataset.bigSrc);
          });

          layer.appendChild(img);
        }
      });

      // 更新提示
      imgCount.textContent = `${imagePaths.length}张图片`;
      loading.style.display = 'none';
    }

    /**
     * 计算每张图片的宽度：基于圆环周长，扣除固定间距
     */
    function calcImgWidth(ringRadius) {
      const circleCircumference = 2 * Math.PI * ringRadius;
      const totalGap = config.fixedImgGap * config.imgsPerLayer;
      const imgTotalWidth = circleCircumference - totalGap;
      return imgTotalWidth / config.imgsPerLayer;
    }

    /**
     * 动态更新层的垂直偏移（随缩放等比变化）
     */
    function updateLayerOffsets() {
      Object.keys(layers).forEach(layerKey => {
        const layer = layers[layerKey];
        const dynamicOffset = config.baseLayerOffsets[layerKey] * currentScale;
        layer.style.transform = `translate(-50%, calc(-50% + ${dynamicOffset}px))`;
      });
    }

    /**
     * 打开大图弹窗：暂停旋转 + 显示大图
     */
    function openBigImg(src) {
      isRotating = false;
      bigImg.src = src;
      imgPopup.style.display = 'flex';
      rotateStatus.textContent = '暂停旋转';
    }

    /**
     * 关闭大图弹窗：恢复旋转 + 隐藏弹窗
     */
    function closeBigImg() {
      isRotating = true;
      imgPopup.style.display = 'none';
      bigImg.src = '';
      rotateStatus.textContent = '自动旋转';
    }

    /**
     * 自动旋转：根据isRotating判断是否执行
     */
    function autoRotate() {
      if (isRotating && !isDragging) {
        currentRotateY += config.autoRotateSpeed;
        updateTransform();
      }
      requestAnimationFrame(autoRotate);
    }

    /**
     * 核心更新函数：同步图片尺寸、层偏移、容器旋转
     */
    function updateTransform() {
      const ringRadius = config.baseRingRadius * currentScale;
      const imgWidth = calcImgWidth(ringRadius);
      const imgHeight = config.baseImgHeight * currentScale;

      document.querySelectorAll('.cylinder-img').forEach(img => {
        const rotateY = img.dataset.angle;
        img.style.width = `${imgWidth}px`;
        img.style.height = `${imgHeight}px`;
        img.style.transform = `
                    translateY(-50%) 
                    rotateY(${rotateY}deg) 
                    translateZ(${ringRadius}px)
                `;
      });

      updateLayerOffsets();
      cylinder.style.transform = `rotateX(${currentRotateX}deg) rotateY(${currentRotateY}deg)`;
    }

    /**
     * 绑定拖拽事件：区分拖拽和点击
     */
    function bindDrag() {
      cylinder.addEventListener('mousedown', (e) => {
        e.preventDefault();
        e.stopPropagation();
        isDragging = true;
        isClickDrag = false;
        startX = e.clientX;
        startY = e.clientY;
        startRotateX = currentRotateX;
        startRotateY = currentRotateY;
      });

      const handleMove = (clientX, clientY) => {
        if (!isDragging) return;
        // 判定拖拽（移动>5px则不算点击）
        const moveX = Math.abs(clientX - startX);
        const moveY = Math.abs(clientY - startY);
        if (moveX > 5 || moveY > 5) isClickDrag = true;

        const deltaX = clientX - startX;
        const deltaY = clientY - startY;
        currentRotateY = startRotateY + deltaX * config.dragSensitivity;
        currentRotateX = startRotateX - deltaY * config.dragSensitivity;
        currentRotateX = Math.max(-40, Math.min(50, currentRotateX));
        updateTransform();
      };

      // 鼠标拖拽
      document.addEventListener('mousemove', (e) => {
        e.preventDefault();
        handleMove(e.clientX, e.clientY);
      });
      document.addEventListener('mouseup', () => isDragging = false);
      document.addEventListener('mouseleave', () => isDragging = false);

      // 移动端触摸
      cylinder.addEventListener('touchstart', (e) => {
        e.preventDefault();
        e.stopPropagation();
        if (e.touches.length === 1) {
          isDragging = true;
          isClickDrag = false;
          const touch = e.touches[0];
          startX = touch.clientX;
          startY = touch.clientY;
          startRotateX = currentRotateX;
          startRotateY = currentRotateY;
        }
      }, { passive: false });

      document.addEventListener('touchmove', (e) => {
        e.preventDefault();
        if (e.touches.length === 1) {
          const touch = e.touches[0];
          handleMove(touch.clientX, touch.clientY);
        }
      }, { passive: false });

      document.addEventListener('touchend', () => isDragging = false);
    }

    /**
     * 绑定缩放事件（滚轮/双指）
     */
    function bindScale() {
      // 滚轮缩放
      cylinder.addEventListener('wheel', (e) => {
        e.preventDefault();
        e.stopPropagation();
        const delta = e.deltaY > 0 ? -0.01 : 0.01;
        currentScale = Math.max(config.minScale, Math.min(config.maxScale, currentScale + delta));
        updateTransform();
      }, { passive: false });

      // 双指缩放（移动端）
      let startDistance = 0;
      cylinder.addEventListener('touchstart', (e) => {
        e.preventDefault();
        if (e.touches.length === 2) {
          startDistance = getDistance(e.touches[0], e.touches[1]);
        }
      }, { passive: false });

      document.addEventListener('touchmove', (e) => {
        if (e.touches.length !== 2) return;
        e.preventDefault();
        const currDistance = getDistance(e.touches[0], e.touches[1]);
        const scaleRatio = currDistance / startDistance;
        currentScale = Math.max(config.minScale, Math.min(config.maxScale, currentScale * scaleRatio));
        startDistance = currDistance;
        updateTransform();
      }, { passive: false });
    }

    /**
     * 辅助：计算双指距离
     */
    function getDistance(t1, t2) {
      const dx = t2.clientX - t1.clientX;
      const dy = t2.clientY - t1.clientY;
      return Math.sqrt(dx * dx + dy * dy);
    }

    // 绑定关闭按钮事件
    closeBtn.addEventListener('click', closeBigImg);
    imgPopup.addEventListener('click', (e) => {
      if (e.target === imgPopup) closeBigImg();
    });

    // 初始化（打开HTML就自动加载）
    window.onload = () => {
      initImages();
      bindDrag();
      bindScale();
      autoRotate();
    };
  </script>
</body>

</html>